# Startup Investment Platform

A comprehensive platform for analyzing and evaluating startup investments using AI-powered market research and competitive analysis.

## Features

### Market Research with OpenAI Deep Research
- **AI-Powered Market Analysis**: Uses OpenAI's deep research capabilities to generate comprehensive market research reports
- **Real-time Data**: Searches for current market information, industry reports, and company data
- **Comprehensive Reports**: Includes market overview, competitive landscape, trends, opportunities, and risk assessment
- **Structured Analysis**: Provides actionable insights with quantitative data and recommendations

### Competitive Analysis with Separated Agents Architecture
- **CompetitorsResearchAgent**: Generates comprehensive competitive research reports using OpenAI's deep research
- **CompetitorsProcessorAgent**: Extracts and processes individual competitors from research reports
- **Database Integration**: Automatically saves research reports and individual competitors with upsert functionality
- **Real-time Competitor Data**: Searches for current company information, funding, revenue, and market positioning

### Key Components

#### Market Research Agent (`agents/MarketAgent.ts`)
- Implements OpenAI's deep research functionality
- Uses web search capabilities to gather current market data
- Generates comprehensive market research reports
- Includes fallback analysis when web search is unavailable

#### Competitors Research Agent (`agents/CompetitorsResearchAgent.ts`)
- Implements OpenAI's deep research functionality for competitive intelligence
- Uses web search capabilities to gather current competitor information
- Generates comprehensive competitive research reports
- Saves research reports to `competitors_research` table

#### Competitors Processor Agent (`agents/CompetitorsProcessorAgent.ts`)
- Extracts structured competitor information from research reports
- Validates and cleans competitor data
- Saves individual competitors to `competitors` table with upsert logic
- Handles fallback extraction when AI processing fails

#### Database Schema
- `market_analysis` table for market research reports
- `competitors_research` table for competitive research reports
- `competitors` table with comprehensive competitor information
- Stores complete research reports generated by AI
- Tracks research status and timestamps

#### API Endpoints
- `POST /api/agents/market`: Generate market research reports
- `POST /api/agents/competitors-research`: Generate competitive research and save competitors
- `GET /api/market-analysis`: Retrieve existing market analysis
- `GET /api/competitors-research`: Retrieve existing competitive research
- `GET /api/competitors`: Retrieve existing competitors
- `POST /api/agents/memo`: Generate investment memos

### Research Processes

#### Market Research Process
1. **Input**: Startup information (name, sector, description)
2. **Research**: AI searches for current market data and industry reports
3. **Analysis**: Comprehensive analysis covering:
   - Market overview and size
   - Target market analysis
   - Competitive landscape
   - Market trends and opportunities
   - Risk assessment
   - Financial projections
4. **Output**: Structured market research report saved to database

#### Competitive Analysis Process (Two-Agent Architecture)
1. **Research Phase** (`CompetitorsResearchAgent`):
   - Input: Startup information (name, sector, description)
   - Research: AI searches for current competitor information and company data
   - Analysis: Comprehensive analysis covering:
     - Direct and indirect competitors
     - Company information and metrics
     - Competitive positioning and strategies
     - Market gaps and opportunities
     - Strategic recommendations
   - Output: Comprehensive competitive research report saved to `competitors_research` table

2. **Processing Phase** (`CompetitorsProcessorAgent`):
   - Input: Research report from CompetitorsResearchAgent
   - Processing: AI extracts structured competitor information
   - Validation: Cleans and validates competitor data
   - Database Integration: Saves individual competitors with upsert logic
   - Output: Individual competitors saved to `competitors` table

### Usage

#### Generate Market Research Report
```bash
curl -X POST http://localhost:3000/api/agents/market \
  -H "Content-Type: application/json" \
  -d '{"startupId":"1"}'
```

#### Generate Competitive Research and Save Competitors
```bash
curl -X POST http://localhost:3000/api/agents/competitors-research \
  -H "Content-Type: application/json" \
  -d '{"startupId":"1"}'
```

#### View Market Analysis
```bash
curl http://localhost:3000/api/market-analysis?startupId=1
```

#### View Competitive Research
```bash
curl http://localhost:3000/api/competitors-research?startupId=1
```

#### View Competitors
```bash
curl http://localhost:3000/api/competitors?startupId=1
```

## Technology Stack

- **Frontend**: Next.js with TypeScript
- **Backend**: Node.js with Express
- **Database**: SQLite with better-sqlite3
- **AI**: OpenAI GPT-4o with deep research capabilities
- **Styling**: Tailwind CSS

## Setup

1. Install dependencies:
```bash
npm install
```

2. Set up environment variables:
```bash
OPENAI_API_KEY=your_openai_api_key
```

3. Initialize database:
```bash
node scripts/setup-database.js
```

4. Seed with sample data:
```bash
node scripts/seed-startups.js
```

5. Start development server:
```bash
npm run dev
```

## Database Schema

### Market Analysis Table
```sql
CREATE TABLE market_analysis (
  startup_id TEXT PRIMARY KEY,
  research_report TEXT,
  research_status TEXT DEFAULT 'pending',
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (startup_id) REFERENCES startups (id)
);
```

### Competitors Research Table
```sql
CREATE TABLE competitors_research (
  startup_id TEXT PRIMARY KEY,
  research_report TEXT,
  research_status TEXT DEFAULT 'pending',
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (startup_id) REFERENCES startups (id)
);
```

### Competitors Table
```sql
CREATE TABLE competitors (
  id TEXT PRIMARY KEY,
  startup_id TEXT NOT NULL,
  competitor_name TEXT NOT NULL,
  description TEXT,
  founded_year INTEGER,
  employee_count INTEGER,
  funding_raised REAL,
  revenue REAL,
  linkedin_url TEXT,
  website_url TEXT,
  main_features TEXT,
  similarity_score REAL DEFAULT 0.0,
  is_external BOOLEAN DEFAULT 1,
  research_status TEXT DEFAULT 'pending',
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (startup_id) REFERENCES startups (id)
);
```

## API Documentation

### Market Research API

#### POST /api/agents/market
Generate a comprehensive market research report for a startup.

**Request Body:**
```json
{
  "startupId": "string"
}
```

**Response:**
```json
{
  "analysis": {
    "id": "string",
    "startup_id": "string",
    "research_report": "string",
    "research_status": "completed"
  },
  "research_report": "string"
}
```

### Competitive Research API

#### POST /api/agents/competitors-research
Generate comprehensive competitive research and save individual competitors to database.

**Request Body:**
```json
{
  "startupId": "string"
}
```

**Response:**
```json
{
  "research": {
    "id": "string",
    "startup_id": "string",
    "research_report": "string",
    "research_status": "completed"
  },
  "competitors": {
    "processed": 8,
    "updated": 0,
    "inserted": 8,
    "total": 8,
    "errors": []
  },
  "summary": {
    "research_generated": true,
    "competitors_found": 8,
    "database_updated": 8,
    "errors": 0
  }
}
```

### Market Analysis API

#### GET /api/market-analysis
Retrieve existing market analysis for a startup.

**Query Parameters:**
- `startupId`: Startup ID

**Response:**
```json
{
  "id": "string",
  "startup_id": "string",
  "research_report": "string",
  "research_status": "string",
  "created_at": "string",
  "updated_at": "string"
}
```

### Competitors Research API

#### GET /api/competitors-research
Retrieve existing competitive research for a startup.

**Query Parameters:**
- `startupId`: Startup ID

**Response:**
```json
{
  "startup_id": "string",
  "research_report": "string",
  "research_status": "string",
  "created_at": "string",
  "updated_at": "string"
}
```

## Development

### Adding New Research Features

1. Update the respective agent class (`MarketAgent`, `CompetitorsResearchAgent`, or `CompetitorsProcessorAgent`)
2. Modify the research prompts to include new analysis areas
3. Update the database schema if needed
4. Test with the API endpoints

### Customizing Research Prompts

The research prompts can be customized in the respective agent files:

- `SYSTEM_PROMPT`: Defines the AI's role and capabilities
- `RESEARCH_PROMPT`: Specifies the research requirements and structure

### Web Search Integration

The system uses OpenAI's function calling to enable web search capabilities:

```typescript
tools: [
  {
    type: 'function',
    function: {
      name: 'web_search',
      description: 'Search the web for current information',
      parameters: {
        type: 'object',
        properties: {
          query: {
            type: 'string',
            description: 'The search query'
          }
        },
        required: ['query']
      }
    }
  }
]
```

### Two-Agent Architecture Benefits

The separated competitors agents provide several advantages:

1. **Separation of Concerns**: Research and processing are handled by specialized agents
2. **Reusability**: The research report can be processed multiple times with different extraction strategies
3. **Error Handling**: If processing fails, the research report is still saved
4. **Flexibility**: Different processing strategies can be applied to the same research report
5. **Scalability**: Each agent can be optimized independently

### Database Integration

The CompetitorsProcessorAgent includes comprehensive database integration:

```typescript
static async saveCompetitorsToDatabase(startupId: string, competitors: Competitor[]): Promise<{ updated: number, inserted: number, errors: string[] }>
```

This method:
- Checks for existing competitors
- Updates incomplete information
- Inserts new competitors
- Handles errors gracefully
- Returns detailed operation statistics

## Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Test thoroughly
5. Submit a pull request

## License

MIT License 